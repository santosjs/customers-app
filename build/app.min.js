/*! customers-app - v0.0.1 - 2015-06-01 */angular.module("customersApp.animation",["ngAnimate"]).animation(".x",function(){var a=function(a,b,c){return console.log(a,b),"active"==b?(a.css({position:"absolute",top:500,left:0,display:"block"}),jQuery(a).animate({top:0},c),function(b){b&&a.stop()}):void 0},b=function(a,b,c){return"active"==b?(a.css({position:"absolute",left:0,top:0}),jQuery(a).animate({top:-500},c),function(b){b&&a.stop()}):void 0};return{addClass:a,removeClass:b}}),angular.module("customersApp",["ngRoute","ngResource","customersApp.title"]).config(["$routeProvider",function(a){a.when("/title",{template:"<app-title></app-title>"}).otherwise({redirectTo:"/title"})}]),angular.module("customersApp.title",["ngRoute","ngResource"]).controller("TitleCtrl",["$scope","$resource","qsort","$http","customers",function(a,b,c,d,e){a.data=[],d.get("./customers_data").then(function(b){for(var c=a.files=b.data,d=0;d<c.length;d++)a.data.push(e.get({id:c[d]},function(a){return a}))}),a.sortVal="name",a.reverse=!1,a.sortBy=function(b){a.sortVal=b;var d,e=angular.copy(a.sortVal);e==b?(a.reverse=!a.reverse,d=-1):d=1,a.data=c(a.data,function(a,b){return a[e]>b[e]?d:0})},a.addCustomer={show:!1,editable:!1,buttonText:"Add new customer",toggle:function(){var a=this.show,b=this.buttonText;this.show=!a,this.buttonText="Add new customer"==b?"Close form":"Add new customer"},data:{name:"",email:"",phone:"",address:{street:"",city:"",state:"",zip:""}},reset:function(){this.data.name="",this.data.email="",this.data.phone="",this.data.address={street:"",city:"",state:"",zip:""}},save:function(b){if(this.editable){for(var c=0;c<a.data.length;c++)if(b.$$hashKey===a.data[c].$$hashKey){a.data.splice(c,1,angular.copy(b));break}this.editable=!1}else b.id=a.data.length,a.data.push(angular.copy(b));this.reset(),this.toggle()},edit:function(a){this.editable=!0,this.toggle(),this.data=a},remove:function(b){for(var c=0;c<a.data.length;c++)if(b.$$hashKey===a.data[c].$$hashKey){a.data.splice(c,1);break}}}}]),angular.module("customersApp.title").directive("appTitle",function(){return{restrict:"E",controller:"TitleCtrl",templateUrl:"templates/title.html",scope:{}}}),angular.module("customersApp.title").factory("qsort",function(){return function a(b,c){if(1==b.length)return b;for(var d=[],e=[],f=b.length-1,g=0;f>g;g++)c(b[g],b[f])?e.push(b[g]):d.push(b[g]);return e.length>0&&(e=a(e,c)),d.length>0&&(d=a(d,c)),d.concat(b[f],e)}}).factory("customers",["$resource",function(a){return a("customers_data/:id",{},{query:{method:"GET",params:{},isArray:!0}})}]),angular.module("templates-dist",["../app/templates/title.html"]),angular.module("../app/templates/title.html",[]).run(["$templateCache",function(a){a.put("../app/templates/title.html",'<h1 class="text-center">Customers Info</h1><hr>\n<form class="form-horizontal" autoComplete="off">\n  <div class="form-group">\n    <label class="hidden-xs col-sm-4 control-label">Search a Customer</label>\n    <div class="col-xs-6 col-sm-4">\n      <input name="search" type="text" class="form-control" placeholder="Start typing..." ng-model="searchQuery">\n    </div>\n    <div class="col-sm-2">\n      <input type="button" class="btn btn-success" value="{{addCustomer.buttonText}}" ng-click="addCustomer.toggle()">\n    </div>\n  </div>\n</form>\n<div class="container">\n    <form class="form-horizontal" role="form" ng-show="addCustomer.show">\n        <div class="form-group">\n          <label for="name" class="col-sm-2 control-label">Contact info</label>\n          <div class="col-sm-3">\n            <input id="name" type="text" class="form-control" ng-model="addCustomer.data.name" placeholder="Name">\n          </div>\n          <div class="col-sm-3">\n            <input id="email" type="text" class="form-control" ng-model="addCustomer.data.email" placeholder="E-mail">\n          </div>\n          <div class="col-sm-3">\n            <input id="phone" type="text" class="form-control" maxlength="20" ng-model="addCustomer.data.phone" placeholder="Phone">\n          </div>\n        </div>\n\n      <div class="form-group">\n        <label for="name" class="col-sm-2 control-label">Address</label>\n        <div class="col-sm-3">\n          <input type="text" class="form-control" ng-model="addCustomer.data.address.state" placeholder="State">\n        </div>\n        <div class="col-sm-2">\n          <input type="text" class="form-control" ng-model="addCustomer.data.address.city" placeholder="City">\n        </div>\n        <div class="col-sm-2">\n          <input type="text" class="form-control" ng-model="addCustomer.data.address.street" placeholder="Street">\n        </div>\n        <div class="col-sm-2">\n          <input type="text" class="form-control" ng-model="addCustomer.data.address.zip" placeholder="Zip code">\n        </div>\n      </div>\n\n      <div class="form-group">\n        <div class="col-sm-offset-4 col-sm-2">\n          <input type="button" class="btn btn-primary btn-block" value="SAVE" ng-click="addCustomer.save(addCustomer.data)">\n        </div>\n        <div class="col-sm-2">\n          <input type="button" class="btn btn-danger btn-block" value="RESET" ng-click="addCustomer.reset()">\n        </div>\n      </div>\n    </form>\n    <hr>\n</div>\n\n<div class="container">\n  <table class="table table-striped">\n    <tr>\n      <th><a href="" ng-click="sortBy(\'name\')">Name</a></th>\n      <th><a href="" ng-click="sortBy(\'phone\')">Phone</a></th>\n      <th><a href="" ng-click="sortBy(\'email\')">E-mail</a></th>\n      <th><a href="" ng-click="sortBy(\'address.street\')">Address</a></th>\n      <th></th><th></th>\n    </tr>\n    <tr ng-repeat="person in data | filter: searchQuery | orderBy: sortVal:reverse">\n      <td>{{person.name}}</td>\n      <td>{{person.phone}}</td>\n      <td>{{person.email}}</td>\n      <td>{{person.address.street}}, {{person.address.city}}, {{person.address.state}}, {{person.address.zip}}</td>\n      <td><a href="" ng-click="addCustomer.edit(person)">Edit</a></td>\n      <td><a href="" ng-click="addCustomer.remove(person)">Remove</a></td>\n    </tr>\n  </table>\n</div>')}]);